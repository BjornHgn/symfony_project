{% extends 'base.html.twig' %}

{% block title %}{{ article.nom }} - DÃ©tails{% endblock %}

{% block body %}
    <div class="container">
        <!-- Partie gauche : Image du vÃªtement -->
        <div class="image-container">
            <img src="{{ article.image }}" alt="Image de {{ article.nom }}">
        </div>
        <!-- Partie droite : DÃ©tails du vÃªtement -->
        <div class="details-container">
            <h1>{{ article.nom }}</h1>
            <p class="price"><strong>Prix :</strong> <span>{{ article.prix }} â‚¬</span></p>
            <p class="description">{{ article.description }}</p>

            <!-- Affichage du stock -->
            <p class="stock">
                <strong>Stock disponible :</strong> 
                <span>{{ stockQuantity }}</span> unitÃ©s
            </p>

            <form action="{{ path('app_cart_add', {'id': article.id}) }}" method="POST">
                <label for="size">Taille :</label>
                <select id="size" name="size" required>
                    <option value="S">S</option>
                    <option value="M">M</option>
                    <option value="L">L</option>
                    <option value="XL">XL</option>
                </select>

        {% if app.user and (app.user == article.author or is_granted('ROLE_ADMIN')) %}
        <a href="{{ path('app_article_edit', {id: article.id}) }}">Edit</a>
        <form action="{{ path('app_article_delete', {id: article.id}) }}" method="post" style="display:inline;">
        <input type="hidden" name="_method" value="DELETE">
        <button type="submit" onclick="return confirm('Are you sure you want to delete this article?');">Delete</button>
        </form>
        {% endif %}

                <label for="quantity">QuantitÃ© :</label>
                <input type="number" id="quantity" name="quantity" value="1" min="1" max="{{ stockQuantity }}" required>

                <button type="submit" class="btn-add-cart">ðŸ›’ Ajouter au panier</button>
            </form>
        </div>
    </div>
{% endblock %}